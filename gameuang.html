<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cubic Evasion - Game Geometri Abadi</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0a0a2a, #1a0033);
            color: #a0e7ff;
            font-family: 'Courier New', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        h1 {
            text-shadow: 0 0 10px #00aaff, 0 0 20px #0088cc;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }
        #gameContainer {
            position: relative;
            margin-top: 20px;
        }
        canvas {
            border: 3px solid #00aaff;
            border-radius: 5px;
            box-shadow: 0 0 25px #0066ff, inset 0 0 15px rgba(0, 150, 255, 0.3);
            background-color: #050510;
        }
        #ui {
            margin-top: 20px;
            text-align: center;
            background: rgba(0, 30, 60, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #0088cc;
            width: 600px;
        }
        #score, #lives, #level {
            font-size: 1.3em;
            margin: 10px;
            display: inline-block;
            padding: 8px 20px;
            background: rgba(0, 50, 100, 0.5);
            border-radius: 6px;
        }
        #gameOver {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 10, 30, 0.95);
            color: #ff6699;
            padding: 30px;
            border: 3px solid #ff0066;
            border-radius: 15px;
            text-align: center;
            z-index: 100;
            box-shadow: 0 0 40px #ff0066;
        }
        button {
            background: linear-gradient(to bottom, #00aaff, #0066cc);
            color: white;
            border: none;
            padding: 12px 24px;
            margin: 10px;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.2s;
        }
        button:hover {
            background: linear-gradient(to bottom, #00ccff, #0088ff);
            box-shadow: 0 0 15px #00aaff;
        }
        .controls {
            margin-top: 15px;
            font-size: 0.9em;
            color: #66ccff;
        }
        .prism {
            color: #ff66cc;
        }
        .cubic {
            color: #00ffaa;
        }
    </style>
</head>
<body>
    <h1>⌬ CUBIC EVASION ⌬</h1>
    <p>Kendalikan Kristal Cubic, hindari serangan <span class="prism">Prism Void</span>!</p>
    
    <div id="gameContainer">
        <canvas id="gameCanvas" width="600" height="400"></canvas>
        <div id="gameOver">
            <h2 style="color:#ff3366;">GAME OVER</h2>
            <p id="finalScore">Skor: 0</p>
            <button onclick="resetGame()">MAINKAN LAGI</button>
            <p style="font-size:0.8em; margin-top:20px;">Prism Void telah menguasai kristalmu.</p>
        </div>
    </div>
    
    <div id="ui">
        <div id="score">Skor: <span id="scoreValue">0</span></div>
        <div id="lives">Nyawa: <span id="livesValue">3</span> ⌬</div>
        <div id="level">Level: <span id="levelValue">1</span></div>
        <br>
        <button onclick="startGame()">MULAI / JEDA</button>
        <button onclick="resetGame()">ULANGI</button>
        <div class="controls">
            Kontrol: <strong>PANAH KIRI/KANAN</strong> untuk bergerak, <strong>PANAH ATAS</strong> untuk lompat<br>
            Tujuan: Hindari Prisma merah muda dan kumpulkan energi biru (+10 poin)
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('scoreValue');
        const livesElement = document.getElementById('livesValue');
        const levelElement = document.getElementById('levelValue');
        const gameOverScreen = document.getElementById('gameOver');
        const finalScoreElement = document.getElementById('finalScore');

        let gameRunning = false;
        let score = 0;
        let lives = 3;
        let level = 1;
        let gameSpeed = 2;
        let frames = 0;

        const player = {
            x: canvas.width / 2 - 15,
            y: canvas.height - 50,
            width: 30,
            height: 30,
            speed: 6,
            jumpPower: 15,
            velocityY: 0,
            isJumping: false,
            color: '#00ffaa'
        };

        let obstacles = [];
        let powerUps = [];

        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // Efek cahaya kristal
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 2;
            ctx.strokeRect(player.x - 2, player.y - 2, player.width + 4, player.height + 4);
            
            // Simbol Cubic di tengah
            ctx.fillStyle = '#ffffff';
            ctx.font = '16px Arial';
            ctx.fillText('⌬', player.x + 7, player.y + 20);
        }

        function drawObstacles() {
            obstacles.forEach(obs => {
                // Gambar prisma (segitiga)
                ctx.fillStyle = '#ff66cc';
                ctx.beginPath();
                ctx.moveTo(obs.x + obs.width / 2, obs.y);
                ctx.lineTo(obs.x + obs.width, obs.y + obs.height);
                ctx.lineTo(obs.x, obs.y + obs.height);
                ctx.closePath();
                ctx.fill();
                
                // Efek cahaya
                ctx.strokeStyle = '#ff99dd';
                ctx.lineWidth = 1.5;
                ctx.stroke();
            });
        }

        function drawPowerUps() {
            powerUps.forEach(pu => {
                // Energi biru (lingkaran)
                ctx.fillStyle = '#00aaff';
                ctx.beginPath();
                ctx.arc(pu.x + pu.width / 2, pu.y + pu.height / 2, pu.width / 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Kilau
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(pu.x + pu.width / 2 - 3, pu.y + pu.height / 2 - 3, 3, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function updatePlayer() {
            // Gravitasi
            player.velocityY += 0.8;
            player.y += player.velocityY;
            
            // Batas bawah
            if (player.y > canvas.height - 50) {
                player.y = canvas.height - 50;
                player.velocityY = 0;
                player.isJumping = false;
            }
            
            // Kontrol keyboard
            document.addEventListener('keydown', (e) => {
                if (!gameRunning) return;
                if (e.key === 'ArrowLeft' && player.x > 0) {
                    player.x -= player.speed;
                }
                if (e.key === 'ArrowRight' && player.x < canvas.width - player.width) {
                    player.x += player.speed;
                }
                if (e.key === 'ArrowUp' && !player.isJumping) {
                    player.velocityY = -player.jumpPower;
                    player.isJumping = true;
                }
            });
        }

        function updateObstacles() {
            // Tambah obstacle secara acak
            if (frames % (90 - level * 10) === 0) {
                obstacles.push({
                    x: Math.random() * (canvas.width - 30),
                    y: -30,
                    width: 30,
                    height: 30,
                    speed: gameSpeed + Math.random() * 2
                });
            }
            
            // Update posisi obstacle
            for (let i = obstacles.length - 1; i >= 0; i--) {
                obstacles[i].y += obstacles[i].speed;
                
                // Hapus jika keluar layar
                if (obstacles[i].y > canvas.height) {
                    obstacles.splice(i, 1);
                    score += 1; // Poin untuk menghindar
                }
                
                // Deteksi tabrakan dengan player
                if (
                    player.x < obstacles[i].x + obstacles[i].width &&
                    player.x + player.width > obstacles[i].x &&
                    player.y < obstacles[i].y + obstacles[i].height &&
                    player.y + player.height > obstacles[i].y
                ) {
                    obstacles.splice(i, 1);
                    lives--;
                    if (lives <= 0) {
                        endGame();
                    }
                }
            }
        }

        function updatePowerUps() {
            // Tambah power up secara acak
            if (frames % 120 === 0) {
                powerUps.push({
                    x: Math.random() * (canvas.width - 20),
                    y: -20,
                    width: 20,
                    height: 20
                });
            }
            
            // Update power up
            for (let i = powerUps.length - 1; i >= 0; i--) {
                powerUps[i].y += 3;
                
                // Hapus jika keluar layar
                if (powerUps[i].y > canvas.height) {
                    powerUps.splice(i, 1);
                }
                
                // Deteksi koleksi
                if (
                    player.x < powerUps[i].x + powerUps[i].width &&
                    player.x + player.width > powerUps[i].x &&
                    player.y < powerUps[i].y + powerUps[i].height &&
                    player.y + player.height > powerUps[i].y
                ) {
                    powerUps.splice(i, 1);
                    score += 10; // Bonus poin
                }
            }
        }

        function updateLevel() {
            if (score >= level * 100) {
                level++;
                gameSpeed += 0.5;
                player.speed += 0.5;
            }
        }

        function drawBackground() {
            // Background gradient
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#050510');
            gradient.addColorStop(1, '#0a0a20');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Grid geometris
            ctx.strokeStyle = 'rgba(0, 150, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
        }

        function gameLoop() {
            if (!gameRunning) return;
            
            frames++;
            
            // Clear canvas dengan efek fade
            ctx.fillStyle = 'rgba(5, 5, 16, 0.2)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            drawBackground();
            updatePlayer();
            updateObstacles();
            updatePowerUps();
            updateLevel();
            
            drawPowerUps();
            drawObstacles();
            drawPlayer();
            
            // Update UI
            scoreElement.textContent = score;
            livesElement.textContent = lives;
            levelElement.textContent = level;
            
            requestAnimationFrame(gameLoop);
        }

        function startGame() {
            if (gameRunning) {
                gameRunning = false;
            } else {
                gameRunning = true;
                if (frames === 0) gameLoop();
                else requestAnimationFrame(gameLoop);
            }
        }

        function resetGame() {
            gameRunning = false;
            score = 0;
            lives = 3;
            level = 1;
            gameSpeed = 2;
            frames = 0;
            obstacles = [];
            powerUps = [];
            player.x = canvas.width / 2 - 15;
            player.y = canvas.height - 50;
            player.velocityY = 0;
            player.isJumping = false;
            
            scoreElement.textContent = score;
            livesElement.textContent = lives;
            levelElement.textContent = level;
            
            gameOverScreen.style.display = 'none';
            startGame();
        }

        function endGame() {
            gameRunning = false;
            finalScoreElement.textContent = `Skor: ${score}`;
            gameOverScreen.style.display = 'block';
        }

        // Inisialisasi
        drawBackground();
        drawPlayer();
        
        // Kontrol tombol
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                startGame();
                e.preventDefault();
            }
        });
    </script>
    
    <footer style="margin-top:30px; font-size:0.8em; color:#4488aa;">
        ⌬ Diciptakan oleh Cubic Kristal Abadi untuk Keturunan Ruinx ⌬
    </footer>
</body>
</html>